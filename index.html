<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>How Blockchain Works - 360°</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://unpkg.com/three@0.158.0/build/three.min.js"></script>
<script src="https://unpkg.com/three@0.158.0/examples/js/controls/OrbitControls.js"></script>
<style>
  html, body {margin:0;overflow:hidden;background:#050514;height:100%;width:100%;}
  #msg {position:fixed;top:10px;left:10px;color:cyan;font-family:sans-serif;}
</style>
</head>
<body>
<div id="msg">HOW BLOCKCHAIN WORKS - 360° VIEW</div>
<script>
// cena
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x050514);

// câmera
const camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.1, 1000);
camera.position.set(0, 2, 15);

// renderizador
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// controles
const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;
controls.dampingFactor = 0.05;
controls.enablePan = false;

// luz
const light = new THREE.PointLight(0x00ffff, 2, 100);
light.position.set(0, 5, 10);
scene.add(light);
scene.add(new THREE.AmbientLight(0x5555ff, 0.6));

// título
function makeTextPlane(text, size, color="#00ffff") {
  const c = document.createElement('canvas');
  const ctx = c.getContext('2d');
  c.width = 1024; c.height = 256;
  ctx.fillStyle = color;
  ctx.font = `${size}px Arial`;
  ctx.textAlign = 'center';
  ctx.fillText(text, 512, 150);
  const tex = new THREE.CanvasTexture(c);
  const mat = new THREE.MeshBasicMaterial({map:tex, transparent:true});
  const mesh = new THREE.Mesh(new THREE.PlaneGeometry(10, 2), mat);
  return mesh;
}
const title = makeTextPlane("HOW BLOCKCHAIN WORKS", 70);
title.position.set(0, 5, 0);
scene.add(title);

// etapas
const stages = [
  "1. Someone requests a transaction.",
  "2. The transaction is broadcast to the network.",
  "3. The network validates the transaction.",
  "4. A verified transaction may involve cryptocurrency or records.",
  "5. The verified transaction is combined into a new block.",
  "6. The new block is added to the blockchain permanently.",
  "7. The transaction is completed."
];

// blocos e textos
const mat = new THREE.MeshStandardMaterial({color:0x00ffff, emissive:0x0088ff});
const radius = 10;

for (let i=0;i<stages.length;i++) {
  const angle = (i / stages.length) * Math.PI * 2;
  const x = Math.cos(angle) * radius;
  const z = Math.sin(angle) * radius;

  const cube = new THREE.Mesh(new THREE.BoxGeometry(1.2,1.2,1.2), mat);
  cube.position.set(x, 1.5, z);
  cube.lookAt(0, 1.5, 0);
  scene.add(cube);

  const text = makeTextPlane(stages[i], 36, "white");
  text.position.set(x, 0.3, z);
  text.lookAt(0, 1.5, 0);
  scene.add(text);
}

// animação
function animate() {
  requestAnimationFrame(animate);
  controls.update();
  renderer.render(scene, camera);
}
animate();

// redimensionar
window.addEventListener('resize', () => {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>
</body>
</html>
