<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Blockchain 360Â° Cardboard VR</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <style>
      body {
        margin: 0;
        background: black;
        overflow: hidden;
        display: flex;
        justify-content: center;
      }
      .vr-eye {
        width: 50vw;
        height: 100vh;
        border-radius: 50%;
        overflow: hidden;
        position: relative;
      }
      .divider {
        position: fixed;
        top: 0;
        left: 50%;
        width: 2px;
        height: 100%;
        background: black;
        z-index: 5;
      }
      iframe {
        border: none;
        width: 100%;
        height: 100%;
        transform: scale(1.02);
      }
    </style>
  </head>

  <body>
    <div class="vr-eye">
      <iframe srcdoc="
        <a-scene embedded background='color: #010510'>
          <a-entity light='type: ambient; intensity: 0.7; color: #99f'></a-entity>
          <a-entity light='type: point; intensity: 1.5; color: #0ff' position='0 3 3'></a-entity>
          <a-entity id='cameraRig' position='0 1.6 0'>
            <a-camera look-controls='true'>
              <a-cursor id='cursor' fuse='true' fuse-timeout='5000'
                        color='#00ffff'
                        geometry='primitive: ring; radius-inner:0.01; radius-outer:0.015'
                        material='shader: flat'>
              </a-cursor>
            </a-camera>
          </a-entity>
          <a-entity id='world'></a-entity>
        </a-scene>
      "></iframe>
    </div>

    <div class="vr-eye">
      <iframe srcdoc="
        <a-scene embedded background='color: #010510'>
          <a-entity light='type: ambient; intensity: 0.7; color: #99f'></a-entity>
          <a-entity light='type: point; intensity: 1.5; color: #0ff' position='0 3 3'></a-entity>
          <a-entity id='cameraRig' position='0 1.6 0'>
            <a-camera look-controls='true'>
              <a-cursor id='cursor' fuse='true' fuse-timeout='5000'
                        color='#00ffff'
                        geometry='primitive: ring; radius-inner:0.01; radius-outer:0.015'
                        material='shader: flat'>
              </a-cursor>
            </a-camera>
          </a-entity>
          <a-entity id='world'></a-entity>
        </a-scene>
      "></iframe>
    </div>

    <div class="divider"></div>
<script>
  const stages = [
    {title:"1. Transaction Request",text:"A user initiates a blockchain transaction.",pos:[0,1.6,-4],color:"#00e5ff"},
    {title:"2. Broadcast",text:"The transaction is shared across the peer network.",pos:[4,1.6,0],color:"#03a9f4"},
    {title:"3. Validation",text:"Nodes validate using consensus rules.",pos:[0,3,4],color:"#4caf50"},
    {title:"4. Verified",text:"The valid transaction joins a block.",pos:[-4,1.6,0],color:"#8bc34a"},
    {title:"5. Block Created",text:"A new block is created for the verified data.",pos:[0,0,4],color:"#ffc107"},
    {title:"6. Added to Chain",text:"Block linked cryptographically to previous one.",pos:[-3,0,0],color:"#ff9800"},
    {title:"7. Complete",text:"Transaction complete. Blockchain updated.",pos:[3,0,0],color:"#e91e63"}
  ];

  function speak(text){
    const msg = new SpeechSynthesisUtterance(text);
    msg.lang="en-US"; msg.pitch=1.3; msg.rate=1.05; msg.volume=1;
    const v=window.speechSynthesis.getVoices().find(v=>v.name.toLowerCase().includes("female")||v.name.includes("Google"));
    if(v) msg.voice=v;
    window.speechSynthesis.cancel();
    window.speechSynthesis.speak(msg);
  }

  window.addEventListener("load",()=>{
    const worlds=document.querySelectorAll("#world");
    worlds.forEach(w=>{
      stages.forEach((s,i)=>{
        const box=document.createElement("a-box");
        box.setAttribute("position",s.pos.join(" "));
        box.setAttribute("color",s.color);
        box.setAttribute("opacity","0.6");
        box.setAttribute("material",`metalness:0.7; emissive:${s.color}; emissiveIntensity:0.4`);
        box.setAttribute("animation","property: rotation; to: 0 360 0; loop:true; dur:10000");

        const title=document.createElement("a-text");
        title.setAttribute("value",s.title);
        title.setAttribute("color",s.color);
        title.setAttribute("position",`${s.pos[0]-1} ${s.pos[1]+1} ${s.pos[2]}`);
        title.setAttribute("width","6");

        const info=document.createElement("a-text");
        info.setAttribute("value",s.text);
        info.setAttribute("color","#fff");
        info.setAttribute("position",`${s.pos[0]-1} ${s.pos[1]-0.3} ${s.pos[2]}`);
        info.setAttribute("width","6");
        info.setAttribute("opacity","0");

        box.addEventListener("mouseenter",()=>{
          info.setAttribute("opacity","1");
          speak(s.title);
        });
        box.addEventListener("mouseleave",()=>{
          info.setAttribute("opacity","0");
        });

        w.appendChild(box);
        w.appendChild(title);
        w.appendChild(info);
      });
    });
  });
</script>

<!-- glowing background sphere -->
<a-entity geometry="primitive: sphere; radius: 25" 
          material="color:#02121f; side:back; emissive:#00ffff; emissiveIntensity:0.2; opacity:0.3"
          animation="property: rotation; to: 0 360 0; loop:true; dur:120000"></a-entity>

</body>
</html>
